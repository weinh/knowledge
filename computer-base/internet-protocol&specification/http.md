# HTTP协议
HTTP是超文本传输协议（_HyperText Transfer Protocol_）的缩写，是互联网上应用最为广泛的一种网络协议，目的是为了提供一种发布和接收HTML页面的方法，从WWW服务器传输超文本到本地浏览器的传输协议。HTTP客户端发起一个请求，建立一个到服务器指定端口（默认端口80）的TCP链接

HTTP使用的是 _**请求-响应**_ 的方式，不仅在请求时需要建立连接，而且需要客户端向服务端发出请求后，服务端才能回复数据
# HTTP1.0
该协议在通信中需要指定版本号，规定浏览器与服务器只保持短暂连接，每次请求服务器都需要建立TCP连接

连接不能复用，带来了一些性能缺陷，如果一个页面包含很多图片，JS，CSS等资源，打开页面时建立一次TCP连接，然后还需要建立不同的TCP连接下载，JS，CSS，图片等资源

_head of line blocking(HOL)_ 导致健康的请求会被不健康的请求影响，而且这种体验的损耗受网络环境影响，出现随机且难以监控，[发生原因](https://baike.baidu.com/item/HOL/5993141?fr=aladdin#1)
# HTTP1.1
该协议默认是长连接（持久连接），一个TCP连接可以传送多个HTTP请求和响应，减少建立和关闭连接的消耗和延迟，还可以不用等待上一次请求结果返回，就可以发起下一次请求，但服务端必须按照接收客户端请求的先后顺序依次返回响应结果，以便客户端区分出每次请求的响应结果内容。

1.1继承了1.0的优点，也克服了1.0的不足，以上需要增加请求头帮助实现，长连接Connection:Keep-Alive，关闭长连接Connection:close，1.1还支持断点续传，RANGE:bytes=xxx表示要求服务从文件xxx字节处开始传送

1.1相较于1.0协议的区别主要体现在：

1. 缓存管理
2. 带宽优化及网络连接的使用
3. 错误通知的管理
4. 消息在网络中的发送
5. 互联网地址的维护
6. 安全性及完整性

HTTP1.1协议在PC确实带来了很多改进和优化，但是对于移动端效果不太大，移动端请求的时间跨度比较大，一般需要从应用层给解决方案

1. 基于TCP的长连接
2. HTTP LONG-POLLING（推送）
3. HTTP STREAMING
4. WEB SOCKET

# HTTP2.0
测试可以看出2.0比之前的协议性能上有很大的提升，有以下特性

* 多路复用（Multiplexing）
> 允许同时通过单一的连接发起多重的请求-响应消息，1.1版本的浏览器客户端同一时间针对同一个域名的请求有数量限制，超过一定数量请求会被阻塞，所以需要增加多个静态CDN域名的原因之一，2.0版本可以发起多重请求-响应消息，而不用依赖建立多个TCP连接

* 二进制分帧
> 2.0版本会将所有传输的信息分割为更小的消息和帧，并对它们采用二进制格式的编码，减少了连接建立次数，减少慢启动次数，是HTTP性能提升

* 首部压缩
> 1.1版本不支持首部压缩，2.0使用HPACK算法进行压缩，

* 服务端推送
> 是一种在客户端请求之前发送数据的机制，服务器可以对客户端的一个请求发送多个响应

# HTTP各版本的区别